(function(b){b.fn.slides=function(a){return a=b.extend({},b.fn.slides.option,a),this.each(function(){function D(e,d,c){if(!K&&L){K=!0,a.animationStart(M+1);switch(e){case"next":O=M,P=M+1,P=V===P?0:P,I=U*2,e=-U*2,M=P;break;case"prev":O=M,P=M-1,P=P===-1?V-1:P,I=0,e=0,M=P;break;case"pagination":P=parseInt(c,10),O=b("."+a.paginationClass+" li."+a.currentClass+" a",X).attr("href").match("[^#/]+$"),P>O?(I=U*2,e=-U*2):(I=0,e=0),M=P;}d==="fade"?a.crossfade?W.children(":eq("+P+")",X).css({zIndex:10}).fadeIn(a.fadeSpeed,a.fadeEasing,function(){a.autoHeight?W.animate({height:W.children(":eq("+P+")",X).outerHeight()},a.autoHeightSpeed,function(){W.children(":eq("+O+")",X).css({display:"none",zIndex:0}),W.children(":eq("+P+")",X).css({zIndex:0}),a.animationComplete(P+1),K=!1;}):(W.children(":eq("+O+")",X).css({display:"none",zIndex:0}),W.children(":eq("+P+")",X).css({zIndex:0}),a.animationComplete(P+1),K=!1);}):W.children(":eq("+O+")",X).fadeOut(a.fadeSpeed,a.fadeEasing,function(){a.autoHeight?W.animate({height:W.children(":eq("+P+")",X).outerHeight()},a.autoHeightSpeed,function(){W.children(":eq("+P+")",X).fadeIn(a.fadeSpeed,a.fadeEasing);}):W.children(":eq("+P+")",X).fadeIn(a.fadeSpeed,a.fadeEasing,function(){b.browser.msie&&b(this).get(0).style.removeAttribute("filter");}),a.animationComplete(P+1),K=!1;}):(W.children(":eq("+P+")").css({left:I,display:"block"}),a.autoHeight?W.animate({left:e,height:W.children(":eq("+P+")").outerHeight()},a.slideSpeed,a.slideEasing,function(){W.css({left:-U}),W.children(":eq("+P+")").css({left:U,zIndex:5}),W.children(":eq("+O+")").css({left:U,display:"none",zIndex:0}),a.animationComplete(P+1),K=!1;}):W.animate({left:e},a.slideSpeed,a.slideEasing,function(){W.css({left:-U}),W.children(":eq("+P+")").css({left:U,zIndex:5}),W.children(":eq("+O+")").css({left:U,display:"none",zIndex:0}),a.animationComplete(P+1),K=!1;})),a.pagination&&(b("."+a.paginationClass+" li."+a.currentClass,X).removeClass(a.currentClass),b("."+a.paginationClass+" li:eq("+P+")",X).addClass(a.currentClass));}}function C(){clearInterval(X.data("interval"));}function B(){a.pause?(clearTimeout(X.data("pause")),clearInterval(X.data("interval")),F=setTimeout(function(){clearTimeout(X.data("pause")),E=setInterval(function(){D("next",R);},a.play),X.data("interval",E);},a.pause),X.data("pause",F)):C();}b("."+a.container,b(this)).children().wrapAll('<div class="slides_control"/>');var X=b(this),W=b(".slides_control",X),V=W.children().size(),U=W.children().outerWidth(),T=W.children().outerHeight(),S=a.start-1,R=a.effect.indexOf(",")<0?a.effect:a.effect.replace(" ","").split(",")[0],Q=a.effect.indexOf(",")<0?R:a.effect.replace(" ","").split(",")[1],P=0,O=0,N=0,M=0,L,K,J,I,H,G,F,E;if(V<2){return b("."+a.container,b(this)).fadeIn(a.fadeSpeed,a.fadeEasing,function(){L=!0,a.slidesLoaded();}),b("."+a.next+", ."+a.prev).fadeOut(0),!1;}if(V<2){return;}S<0&&(S=0),S>V&&(S=V-1),a.start&&(M=S),a.randomize&&W.randomize(),b("."+a.container,X).css({overflow:"hidden",position:"relative"}),W.children().css({position:"absolute",top:0,left:W.children().outerWidth(),zIndex:0,display:"none"}),W.css({position:"relative",width:U*3,height:T,left:-U}),b("."+a.container,X).css({display:"block"}),a.autoHeight&&(W.children().css({height:"auto"}),W.animate({height:W.children(":eq("+S+")").outerHeight()},a.autoHeightSpeed));if(a.preload&&W.find("img:eq("+S+")").length){b("."+a.container,X).css({background:"url("+a.preloadImage+") no-repeat 50% 50%"});var A=W.find("img:eq("+S+")").attr("src")+"?"+(new Date).getTime();b("img",X).parent().attr("class")!="slides_control"?G=W.children(":eq(0)")[0].tagName.toLowerCase():G=W.find("img:eq("+S+")"),W.find("img:eq("+S+")").attr("src",A).load(function(){W.find(G+":eq("+S+")").fadeIn(a.fadeSpeed,a.fadeEasing,function(){b(this).css({zIndex:5}),b("."+a.container,X).css({background:""}),L=!0,a.slidesLoaded();});});}else{W.children(":eq("+S+")").fadeIn(a.fadeSpeed,a.fadeEasing,function(){L=!0,a.slidesLoaded();});}a.bigTarget&&(W.children().css({cursor:"pointer"}),W.children().click(function(){return D("next",R),!1;})),a.hoverPause&&a.play&&(W.bind("mouseover",function(){C();}),W.bind("mouseleave",function(){B();})),a.generateNextPrev&&(b("."+a.container,X).after('<a href="#" class="'+a.prev+'">Prev</a>'),b("."+a.prev,X).after('<a href="#" class="'+a.next+'">Next</a>')),b("."+a.next,X).click(function(c){c.preventDefault(),a.play&&B(),D("next",R);}),b("."+a.prev,X).click(function(c){c.preventDefault(),a.play&&B(),D("prev",R);}),a.generatePagination?(a.prependPagination?X.prepend("<ul class="+a.paginationClass+"></ul>"):X.append("<ul class="+a.paginationClass+"></ul>"),W.children().each(function(){b("."+a.paginationClass,X).append('<li><a href="#'+N+'">'+(N+1)+"</a></li>"),N++;})):b("."+a.paginationClass+" li a",X).each(function(){b(this).attr("href","#"+N),N++;}),b("."+a.paginationClass+" li:eq("+S+")",X).addClass(a.currentClass),b("."+a.paginationClass+" li a",X).click(function(){return a.play&&B(),J=b(this).attr("href").match("[^#/]+$"),M!=J&&D("pagination",Q,J),!1;}),b("a.link",X).click(function(){return a.play&&B(),J=b(this).attr("href").match("[^#/]+$")-1,M!=J&&D("pagination",Q,J),!1;}),a.play&&(E=setInterval(function(){D("next",R);},a.play),X.data("interval",E));});},b.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},b.fn.randomize=function(a){function d(){return Math.round(Math.random())-0.5;}return b(this).each(function(){var k=b(this),j=k.children(),h=j.length;if(h>1){j.hide();var c=[];for(i=0;i<h;i++){c[c.length]=i;}c=c.sort(d),b.each(c,function(e,n){var m=j.eq(n),l=m.clone(!0);l.show().appendTo(k),a!==undefined&&a(m,l),m.remove();});}});};})(jQuery);